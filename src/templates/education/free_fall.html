<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªç”±è½ä½“è¿åŠ¨ï¼šä¸€ä¸ªäº¤äº’å¼æ¢ç´¢</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony Neutrals -->
    <!-- Application Structure Plan: The application is designed as a single-page, scrolling narrative that mirrors the scientific inquiry process of the teaching plan. It begins with Aristotle's initial misconception, challenges it with Galileo's logic, uses interactive experiments to isolate the variable of air resistance, demonstrates the ideal principle in a vacuum, and finally provides a quantitative understanding with definitions and an interactive calculator. This story-driven, step-by-step structure is chosen to maximize learning and engagement by guiding the user through the process of discovery, making the final concepts more intuitive and memorable. It now includes Gemini-powered sections for real-world examples and a Q&A assistant to deepen understanding. -->
    <!-- Visualization & Content Choices: 
        1. Aristotle's View -> Goal: Compare -> Viz: Side-by-side animated divs -> Interaction: Click a button to drop objects -> Justification: Visually establish the initial, intuitive misconception.
        2. Galileo's Logic -> Goal: Inform -> Viz: Static text and diagram -> Interaction: None -> Justification: Clearly present the logical argument that refutes the initial misconception.
        3. Air Resistance -> Goal: Isolate Variable -> Viz: Side-by-side animated divs (paper vs. ball) -> Interaction: Click a button to drop -> Justification: Interactively demonstrate that shape and air resistance, not just mass, affect falling speed in reality.
        4. Vacuum Experiment -> Goal: Demonstrate Ideal Case -> Viz: Animated icons in a "vacuum chamber" -> Interaction: Click a button to drop -> Justification: Provide the "aha" moment by showing that without air resistance, all objects fall equally. This is the core experimental evidence.
        5. Free Fall Formulas -> Goal: Quantify & Relate -> Viz: Interactive sliders, numerical displays, and a dynamic Chart.js line chart -> Interaction: User adjusts time/height, the chart updates instantly to show velocity and position changes. -> Justification: Makes the abstract formulas tangible and allows for exploration of the mathematical relationships. Library: Chart.js (Canvas).
        6. Real-World Examples (Gemini) -> Goal: Apply -> Viz: Text input and a response box -> Interaction: User types a scenario, clicks a button to call Gemini API -> Justification: Connects abstract physics to concrete, user-relevant examples.
        7. AI Teaching Assistant (Gemini) -> Goal: Clarify & Extend -> Viz: Text input and a response box -> Interaction: User asks a question, clicks a button to call Gemini API -> Justification: Offers personalized, on-demand explanations, catering to individual curiosity.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f4f3f2; /* Warm Neutral Background */
            color: #3f3f46;
            scroll-behavior: smooth;
        }
        .section-title {
            font-size: 2.25rem;
            font-weight: 700;
            color: #1e293b; /* Dark Slate */
            border-bottom: 3px solid #f59e0b; /* Amber Accent */
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .interactive-box {
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease;
            min-height: 350px;
        }
        .object {
            position: absolute;
            bottom: calc(100% - 40px);
            left: 50%;
            transform: translateX(-50%);
            transition: bottom 2s ease-in;
            font-size: 2rem;
        }
        .paper { width: 60px; height: 40px; background-color: #e2e8f0; border: 1px solid #94a3b8;}
        .ball { width: 40px; height: 40px; background-color: #64748b; border-radius: 50%;}
        .feather { font-size: 2.5rem; }
        .button {
            background-color: #1e293b;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .button:hover {
            background-color: #334155;
        }
        .button:disabled {
            background-color: #94a3b8;
            cursor: not-allowed;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-link {
            transition: color 0.3s ease, border-color 0.3s ease;
            border-bottom: 2px solid transparent;
            padding-bottom: 4px;
        }
        .nav-link:hover {
            color: #f59e0b;
            border-bottom-color: #f59e0b;
        }
        .active-link {
            color: #f59e0b;
            font-weight: 700;
            border-bottom-color: #f59e0b;
        }
        .gemini-response {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            min-height: 100px;
            white-space: pre-wrap;
            line-height: 1.75;
        }
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 0.5rem;
            text-align: center;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex justify-between items-center">
                <h1 class="text-xl font-bold text-slate-800">è‡ªç”±è½ä½“è¿åŠ¨æ¢ç©¶</h1>
                <div class="hidden md:flex space-x-8 text-sm">
                    <a href="#section1" class="nav-link">å¤è€è§‚å¿µ</a>
                    <a href="#section2" class="nav-link">é€»è¾‘æŒ‘æˆ˜</a>
                    <a href="#section3" class="nav-link">ç©ºæ°”é˜»åŠ›</a>
                    <a href="#section4" class="nav-link">ç†æƒ³å®éªŒ</a>
                    <a href="#section5" class="nav-link">ç‰©ç†æ¨¡å‹</a>
                    <a href="#section6" class="nav-link">è¿åŠ¨è§„å¾‹</a>
                    <a href="#section7" class="nav-link font-bold">âœ¨AIåŠ©æ•™</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12">
        
        <section id="section1" class="my-16 scroll-mt-20">
            <h2 class="section-title">1. å¤è€çš„è§‚å¿µï¼šäºšé‡Œå£«å¤šå¾·çš„çœ‹æ³•</h2>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="text-lg leading-relaxed">
                    <p class="mb-4">è¿‘ä¸¤åƒå¹´æ¥ï¼Œå¤å¸Œè…Šå“²å­¦å®¶äºšé‡Œå£«å¤šå¾·çš„è§‚ç‚¹ä¸€ç›´æ·±å…¥äººå¿ƒï¼š<strong class="text-amber-600">é‡çš„ç‰©ä½“æ¯”è½»çš„ç‰©ä½“ä¸‹è½å¾—å¿«</strong>ã€‚</p>
                    <p class="mb-4">è¿™éå¸¸ç¬¦åˆæˆ‘ä»¬çš„ç”Ÿæ´»ç›´è§‰ã€‚æ¯”å¦‚ï¼Œä¸€ç‰‡ç¾½æ¯›å’Œä¸€å—çŸ³å¤´åŒæ—¶ä»é«˜å¤„è½ä¸‹ï¼Œæˆ‘ä»¬æ€»ä¼šçœ‹åˆ°çŸ³å¤´å…ˆè½åœ°ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„è™šæ‹Ÿå®éªŒæ¥è§‚å¯Ÿè¿™ä¸ªç°è±¡ã€‚</p>
                    <p>ç‚¹å‡»ä¸‹æ–¹çš„"å¼€å§‹ä¸‹è½"æŒ‰é’®ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
                </div>
                <div class="interactive-box flex flex-col justify-between">
                    <div class="relative w-full h-64 bg-slate-100 rounded-md overflow-hidden border">
                        <div id="aristotle-rock" class="object ball" style="left: 30%;"></div>
                        <div id="aristotle-feather" class="object feather" style="left: 70%;">ğŸ•Šï¸</div>
                        <div class="absolute bottom-0 w-full h-2 bg-green-700"></div>
                    </div>
                    <button id="aristotle-btn" class="button mt-4 mx-auto">å¼€å§‹ä¸‹è½</button>
                </div>
            </div>
        </section>
        
        <section id="section2" class="my-16 scroll-mt-20">
            <h2 class="section-title">2. é€»è¾‘çš„æŒ‘æˆ˜ï¼šä¼½åˆ©ç•¥çš„æ€è€ƒ</h2>
            <div class="bg-white p-8 rounded-lg shadow-md">
                <p class="text-lg leading-relaxed mb-4">ç„¶è€Œï¼Œ16ä¸–çºªçš„æ„å¤§åˆ©ç§‘å­¦å®¶ä¼½åˆ©ç•¥å¯¹äºšé‡Œå£«å¤šå¾·çš„ç†è®ºæå‡ºäº†ä¸€ä¸ªè‘—åçš„é€»è¾‘æŒ‘æˆ˜ï¼Œè¿™ä¸ªæŒ‘æˆ˜ä¸éœ€è¦ä»»ä½•å®éªŒï¼Œä»…å‡­æ€è€ƒå°±èƒ½åŠ¨æ‘‡è¿™ä¸ªåƒå¹´è§‚å¿µã€‚</p>
                <div class="bg-amber-50 border-l-4 border-amber-500 text-amber-800 p-6 rounded-md">
                    <h3 class="font-bold text-xl mb-2">ä¼½åˆ©ç•¥æ‚–è®º</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li>å‡è®¾äºšé‡Œå£«å¤šå¾·æ˜¯å¯¹çš„ï¼Œä¸€å—å¤§çŸ³å¤´ï¼ˆé‡ï¼‰æ¯”ä¸€å—å°çŸ³å¤´ï¼ˆè½»ï¼‰ä¸‹è½å¾—å¿«ã€‚</li>
                        <li>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸¤å—çŸ³å¤´ç”¨ä¸€æ ¹çŸ­ç»³ç»‘åœ¨ä¸€èµ·ã€‚ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li>
                        <li>ä¸€æ–¹é¢ï¼Œå°çŸ³å¤´ä¼šæ‹–æ…¢å¤§çŸ³å¤´çš„ä¸‹è½ï¼Œæ‰€ä»¥æ•´ä½“é€Ÿåº¦åº”è¯¥æ¯”<strong class="font-semibold">å¤§çŸ³å¤´å•ç‹¬ä¸‹è½è¦æ…¢</strong>ã€‚</li>
                        <li>ä½†å¦ä¸€æ–¹é¢ï¼Œç»‘åœ¨ä¸€èµ·çš„ç‰©ä½“æ€»é‡é‡æ¯”å¤§çŸ³å¤´è¿˜è¦é‡ï¼Œæ‰€ä»¥å®ƒçš„ä¸‹è½é€Ÿåº¦åº”è¯¥æ¯”<strong class="font-semibold">å¤§çŸ³å¤´å•ç‹¬ä¸‹è½è¦å¿«</strong>ã€‚</li>
                    </ul>
                    <p class="mt-4 font-semibold text-center text-xl">åŒä¸€ä¸ªç‰©ä½“ï¼Œä¸‹è½é€Ÿåº¦æ—¢è¦å˜å¿«åˆè¦å˜æ…¢ï¼Œè¿™æ˜¾ç„¶æ˜¯è‡ªç›¸çŸ›ç›¾çš„ï¼</p>
                </div>
                 <p class="text-lg leading-relaxed mt-6">è¿™ä¸ªé€»è¾‘çŸ›ç›¾æœ‰åŠ›åœ°è¡¨æ˜ï¼Œç‰©ä½“ä¸‹è½çš„å¿«æ…¢ï¼Œå¯èƒ½ä¸æˆ‘ä»¬ç›´è§‰æƒ³è±¡çš„åŸå› â€”â€”"è½»é‡"â€”â€”æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚é‚£ä¹ˆï¼ŒçœŸæ­£å½±å“ä¸‹è½å¿«æ…¢çš„å› ç´ æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
            </div>
        </section>

        <section id="section3" class="my-16 scroll-mt-20">
            <h2 class="section-title">3. å¯»æ‰¾çœŸå‡¶ï¼šç©ºæ°”é˜»åŠ›çš„å½±å“</h2>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="text-lg leading-relaxed">
                    <p class="mb-4">ä¼½åˆ©ç•¥æ„è¯†åˆ°ï¼Œæˆ‘ä»¬ç”Ÿæ´»ä¸­è§‚å¯Ÿåˆ°çš„ç°è±¡ï¼Œå…¶å®å—åˆ°äº†ä¸€ä¸ªçœ‹ä¸è§çš„å› ç´ çš„å¹²æ‰°â€”â€”<strong class="text-amber-600">ç©ºæ°”é˜»åŠ›</strong>ã€‚</p>
                    <p class="mb-4">ç‰©ä½“çš„å½¢çŠ¶å’Œè¡¨é¢ç§¯ä¼šæå¤§åœ°å½±å“å®ƒå—åˆ°çš„ç©ºæ°”é˜»åŠ›ã€‚è®©æˆ‘ä»¬ç”¨ä¸¤å¼ è´¨é‡å®Œå…¨ç›¸åŒçš„çº¸æ¥åšå®éªŒï¼šä¸€å¼ ä¿æŒå¹³å±•ï¼Œå¦ä¸€å¼ æ‰æˆçº¸å›¢ã€‚çº¸å›¢çš„è¡¨é¢ç§¯å°å¾—å¤šï¼Œå—åˆ°çš„ç©ºæ°”é˜»åŠ›ä¹Ÿå°å¾—å¤šã€‚</p>
                    <p>ç‚¹å‡»æŒ‰é’®ï¼Œè§‚å¯Ÿå®ƒä»¬çš„ä¸‹è½æƒ…å†µã€‚</p>
                </div>
                <div class="interactive-box flex flex-col justify-between">
                    <div class="relative w-full h-64 bg-slate-100 rounded-md overflow-hidden border">
                         <div id="resistance-ball" class="object ball" style="left: 30%;"></div>
                         <div id="resistance-paper" class="object paper" style="left: 70%;"></div>
                        <div class="absolute bottom-0 w-full h-2 bg-green-700"></div>
                    </div>
                    <button id="resistance-btn" class="button mt-4 mx-auto">å¼€å§‹ä¸‹è½</button>
                </div>
            </div>
        </section>

        <section id="section4" class="my-16 scroll-mt-20">
            <h2 class="section-title">4. ç†æƒ³å®éªŒï¼šæ’é™¤ä¸€åˆ‡å¹²æ‰°</h2>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                 <div class="text-lg leading-relaxed">
                    <p class="mb-4">æ—¢ç„¶ç©ºæ°”é˜»åŠ›æ˜¯"çœŸå‡¶"ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬èƒ½åˆ›é€ ä¸€ä¸ªå®Œå…¨æ²¡æœ‰ç©ºæ°”çš„ç¯å¢ƒï¼ˆçœŸç©ºï¼‰ï¼Œæƒ…å†µåˆä¼šå¦‚ä½•å‘¢ï¼Ÿåœ¨çœŸç©ºä¸­ï¼Œä»»ä½•ç‰©ä½“ï¼Œæ— è®ºè½»é‡ã€å½¢çŠ¶å¦‚ä½•ï¼Œéƒ½å°†ä¸å—ç©ºæ°”é˜»åŠ›çš„å½±å“ã€‚</p>
                    <p class="mb-4">ç°ä»£ç§‘æŠ€è®©æˆ‘ä»¬èƒ½è½»æ˜“å®ç°è¿™ä¸ªæ€æƒ³å®éªŒã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡æ‹ŸçœŸç©ºå®¤ï¼Œæˆ‘ä»¬å°†åŒæ—¶é‡Šæ”¾ä¸€ç‰‡ç¾½æ¯›å’Œä¸€ä¸ªä¿é¾„çƒã€‚</p>
                    <p>æ ¹æ®ä½ çš„æ¨æ–­ï¼Œå®ƒä»¬ä¼šå¦‚ä½•ä¸‹è½ï¼Ÿç‚¹å‡»æŒ‰é’®æ¥éªŒè¯ä½ çš„æƒ³æ³•ã€‚</p>
                </div>
                <div class="interactive-box flex flex-col justify-between">
                    <div class="relative w-full h-64 bg-slate-100 rounded-md overflow-hidden border">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span class="text-6xl font-bold text-slate-200 select-none">çœŸç©ºå®¤</span>
                        </div>
                        <div id="vacuum-ball" class="object ball" style="left: 30%;"></div>
                        <div id="vacuum-feather" class="object feather" style="left: 70%;">ğŸ•Šï¸</div>
                        <div class="absolute bottom-0 w-full h-2 bg-green-700"></div>
                    </div>
                    <button id="vacuum-btn" class="button mt-4 mx-auto">åœ¨çœŸç©ºä¸­ä¸‹è½</button>
                </div>
            </div>
        </section>
        
        <section id="section5" class="my-16 scroll-mt-20">
            <h2 class="section-title">5. ç‰©ç†æ¨¡å‹ï¼šè‡ªç”±è½ä½“è¿åŠ¨</h2>
            <div class="bg-white p-8 rounded-lg shadow-md text-lg leading-relaxed">
                <p class="mb-4">é€šè¿‡ä¸Šé¢çš„æ¢ç´¢ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥æ­ç¤ºç‰©ç†å­¦å®¶æ˜¯å¦‚ä½•æè¿°è¿™ç§ç†æƒ³çŠ¶æ€ä¸‹çš„ä¸‹è½è¿åŠ¨äº†ã€‚</p>
                <div class="bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-6 rounded-md">
                    <h3 class="font-bold text-xl mb-2">è‡ªç”±è½ä½“è¿åŠ¨ (Free Fall)</h3>
                    <p class="mb-2">å®šä¹‰ï¼šç‰©ä½“<strong class="font-semibold">åªåœ¨é‡åŠ›ä½œç”¨ä¸‹</strong>ï¼Œä»<strong class="font-semibold">é™æ­¢å¼€å§‹</strong>çš„ä¸‹è½è¿åŠ¨ã€‚</p>
                    <ul class="list-disc list-inside space-y-1">
                        <li>è¿™æ˜¯ä¸€ä¸ª<strong class="font-semibold">ç†æƒ³åŒ–çš„ç‰©ç†æ¨¡å‹</strong>ï¼Œå¿½ç•¥äº†ç©ºæ°”é˜»åŠ›ç­‰æ¬¡è¦å› ç´ ã€‚</li>
                        <li>åœ¨åœ°çƒä¸Šï¼Œå®ƒæ˜¯ä¸€ç§<strong class="font-semibold">åˆé€Ÿåº¦ä¸º0çš„åŒ€åŠ é€Ÿç›´çº¿è¿åŠ¨</strong>ã€‚</li>
                    </ul>
                </div>
                 <div class="bg-green-50 border-l-4 border-green-500 text-green-800 p-6 rounded-md mt-6">
                    <h3 class="font-bold text-xl mb-2">é‡åŠ›åŠ é€Ÿåº¦ (Gravitational Acceleration)</h3>
                    <p class="mb-2">å®šä¹‰ï¼šè‡ªç”±è½ä½“è¿åŠ¨çš„åŠ é€Ÿåº¦ï¼Œç”¨ç¬¦å· <strong class="font-semibold">g</strong> è¡¨ç¤ºã€‚</p>
                     <ul class="list-disc list-inside space-y-1">
                        <li>å®ƒçš„æ–¹å‘å§‹ç»ˆ<strong class="font-semibold">ç«–ç›´å‘ä¸‹</strong>ã€‚</li>
                        <li>åœ¨åœ°çƒè¡¨é¢çš„åŒä¸€åœ°ç‚¹ï¼Œ<strong class="font-semibold">g çš„å€¼æ˜¯ä¸€ä¸ªå¸¸æ•°</strong>ï¼Œä¸ç‰©ä½“çš„è´¨é‡ã€å½¢çŠ¶æ— å…³ã€‚</li>
                        <li>é€šå¸¸è®¡ç®—ä¸­å– <strong class="font-semibold">g â‰ˆ 9.8 m/sÂ²</strong>ã€‚è¿™æ„å‘³ç€æ¯è¿‡1ç§’ï¼Œä¸‹è½é€Ÿåº¦å¢åŠ çº¦9.8ç±³/ç§’ã€‚</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="section6" class="my-16 scroll-mt-20">
            <h2 class="section-title">6. è¿åŠ¨çš„è§„å¾‹ï¼šå…¬å¼ä¸å¯è§†åŒ–</h2>
             <p class="text-lg leading-relaxed mb-8 text-center max-w-3xl mx-auto">è‡ªç”±è½ä½“è¿åŠ¨ä½œä¸ºä¸€ç§åŒ€åŠ é€Ÿç›´çº¿è¿åŠ¨ï¼Œéµå¾ªç®€æ´çš„æ•°å­¦è§„å¾‹ã€‚ä½ å¯ä»¥é€šè¿‡ä¸‹æ–¹çš„æ»‘å—æ¥è°ƒæ•´ä¸‹è½æ—¶é—´ï¼Œç›´è§‚åœ°æ„Ÿå—é€Ÿåº¦å’Œä½ç§»çš„å˜åŒ–ï¼Œå¹¶è§‚å¯Ÿå®ƒä»¬åœ¨å›¾è¡¨ä¸Šçš„å…³ç³»ã€‚</p>
            <div class="bg-white p-8 rounded-lg shadow-lg">
                <div class="grid md:grid-cols-3 gap-6 mb-8 text-center">
                    <div class="bg-slate-100 p-4 rounded-lg">
                        <label for="time-slider" class="block text-sm font-medium text-slate-600">ä¸‹è½æ—¶é—´ (t)</label>
                        <span id="time-display" class="text-3xl font-bold text-slate-800">0.0 s</span>
                        <input id="time-slider" type="range" min="0" max="5" step="0.1" value="0" class="w-full mt-2">
                    </div>
                     <div class="bg-blue-100 p-4 rounded-lg">
                        <p class="text-sm font-medium text-blue-600">ç¬æ—¶é€Ÿåº¦ (v = gt)</p>
                        <p id="velocity-display" class="text-3xl font-bold text-blue-800">0.0 m/s</p>
                    </div>
                     <div class="bg-green-100 p-4 rounded-lg">
                        <p class="text-sm font-medium text-green-600">ä¸‹è½é«˜åº¦ (h = Â½gtÂ²)</p>
                        <p id="height-display" class="text-3xl font-bold text-green-800">0.0 m</p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="fallChart"></canvas>
                </div>
                
                <div class="mt-12 border-t pt-8">
                    <h3 class="text-xl font-bold text-center text-slate-700 mb-4">âœ¨ æ‹“å±•åº”ç”¨ï¼šç”Ÿæ´»ä¸­çš„è‡ªç”±è½ä½“</h3>
                    <p class="text-center text-slate-600 mb-4">è¾“å…¥ä¸€ä¸ªç”Ÿæ´»ä¸­çš„åœºæ™¯ï¼Œè®©AIä¸ºä½ è§£é‡Šå…¶ä¸­çš„è‡ªç”±è½ä½“ç°è±¡ã€‚</p>
                    <div class="max-w-xl mx-auto">
                        <div class="flex gap-2">
                            <input id="real-life-input" type="text" class="flex-grow p-2 border rounded-md" placeholder="ä¾‹å¦‚ï¼šè¿‡å±±è½¦ã€è·³æ°´ã€è‹¹æœè½åœ°...">
                            <button id="real-life-btn" class="button">ç”Ÿæˆå®ä¾‹</button>
                        </div>
                        <div id="real-life-response" class="gemini-response mt-4">AIçš„è§£é‡Šå°†å‡ºç°åœ¨è¿™é‡Œ...</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="section7" class="my-16 scroll-mt-20">
            <h2 class="section-title">7. âœ¨ AIåŠ©æ•™ï¼šä½ çš„ä¸“å±ç‰©ç†è€å¸ˆ</h2>
            <div class="bg-white p-8 rounded-lg shadow-lg">
                <p class="text-lg text-center mb-4">å¯¹è‡ªç”±è½ä½“è¿˜æœ‰ç–‘é—®å—ï¼Ÿæˆ–è€…æƒ³äº†è§£æ›´å¤šå…³äºä¼½åˆ©ç•¥çš„æ•…äº‹ï¼Ÿåœ¨è¿™é‡Œéšæ—¶å‘AIåŠ©æ•™æé—®å§ï¼</p>
                <div class="max-w-2xl mx-auto">
                     <textarea id="qa-input" class="w-full p-2 border rounded-md" rows="3" placeholder="åœ¨è¿™é‡Œè¾“å…¥ä½ çš„é—®é¢˜..."></textarea>
                     <button id="qa-btn" class="button w-full mt-2">å‘AIæé—®</button>
                     <div id="qa-response" class="gemini-response mt-4">AIçš„å›ç­”å°†å‡ºç°åœ¨è¿™é‡Œ...</div>
                </div>
            </div>
        </section>
        
    </main>

    <footer class="bg-slate-800 text-slate-300 py-6 mt-16">
        <div class="container mx-auto px-6 text-center">
            <p>äº¤äº’å¼æ•™å­¦åº”ç”¨ &copy; 2025</p>
            <p class="text-sm text-slate-400 mt-1">åŸºäº"è‡ªç”±è½ä½“è¿åŠ¨"æ•™å­¦è®¾è®¡åˆ›å»ºï¼Œç”±Gemini AIæä¾›æŠ€æœ¯å¢å¼º</p>
        </div>
    </footer>
    
    <div id="loading-modal" class="modal">
        <div class="modal-content">
            <p id="modal-text">æ­£åœ¨æ€è€ƒä¸­...</p>
        </div>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const g = 9.8;

        // Modal Controls
        const modal = document.getElementById('loading-modal');
        const modalText = document.getElementById('modal-text');
        
        function showModal(text = 'æ­£åœ¨æ€è€ƒä¸­...') {
            modalText.textContent = text;
            modal.style.display = 'block';
        }

        function hideModal() {
            modal.style.display = 'none';
        }
        
        // ä½¿ç”¨ç«å±±APIæ›¿ä»£Gemini API
        async function callGemini(prompt) {
            showModal('æ­£åœ¨æ€è€ƒä¸­ï¼Œè¯·ç¨å€™...');
            
            try {
                // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
                const authCheckResponse = await fetch('/utils/check_login_status');
                const authStatus = await authCheckResponse.json();
                
                if (!authStatus.is_logged_in) {
                    hideModal();
                    return "è¯·å…ˆç™»å½•åå†ä½¿ç”¨AIåŠŸèƒ½ã€‚æ‚¨å¯ä»¥ç‚¹å‡»é¡µé¢é¡¶éƒ¨çš„"ç™»å½•"æŒ‰é’®è¿›è¡Œç™»å½•ã€‚";
                }
                
                // è°ƒç”¨åç«¯APIï¼Œç”±åç«¯å¤„ç†ç«å±±APIè¯·æ±‚
                const response = await fetch('/education/api/gemini', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'X-CSRF-Token': getCsrfToken()
                    },
                    body: JSON.stringify({ prompt: prompt })
                });

                if (!response.ok) {
                    if (response.status === 401) {
                        hideModal();
                        return "è¯·å…ˆç™»å½•åå†ä½¿ç”¨AIåŠŸèƒ½ã€‚";
                    }
                    throw new Error(`API è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : ${response.status}`);
                }

                const result = await response.json();
                hideModal();

                if (result.content) {
                    return result.content;
                } else if (result.error) {
                    console.error('APIè¿”å›é”™è¯¯:', result.error);
                    return `æŠ±æ­‰ï¼ŒAIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨: ${result.error}`;
                } else {
                    return "æŠ±æ­‰ï¼Œæ— æ³•è·å–æœ‰æ•ˆçš„å›ç­”ã€‚è¯·ç¨åå†è¯•ã€‚";
                }
            } catch (error) {
                console.error('API Error:', error);
                hideModal();
                return `æŠ±æ­‰ï¼Œè¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ã€‚è¯·ç¨åå†è¯•ã€‚`;
            }
        }
        
        // è·å–CSRFä»¤ç‰Œ
        function getCsrfToken() {
            // ä»cookieä¸­è·å–CSRFä»¤ç‰Œ
            const cookies = document.cookie.split(';');
            for (let cookie of cookies) {
                const [name, value] = cookie.trim().split('=');
                if (name === 'csrf_token') {
                    return decodeURIComponent(value);
                }
            }
            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²
            return '';
        }

        // Section 1: Aristotle's View
        const aristotleBtn = document.getElementById('aristotle-btn');
        const aristotleRock = document.getElementById('aristotle-rock');
        const aristotleFeather = document.getElementById('aristotle-feather');
        aristotleBtn.addEventListener('click', () => {
            aristotleBtn.disabled = true;
            aristotleRock.style.transition = 'bottom 1s ease-in';
            aristotleFeather.style.transition = 'bottom 4s ease-out';
            aristotleRock.style.bottom = '0px';
            aristotleFeather.style.bottom = '0px';
            setTimeout(() => {
                aristotleRock.style.transition = 'none';
                aristotleFeather.style.transition = 'none';
                aristotleRock.style.bottom = 'calc(100% - 40px)';
                aristotleFeather.style.bottom = 'calc(100% - 40px)';
                aristotleBtn.disabled = false;
            }, 4100);
        });

        // Section 3: Air Resistance
        const resistanceBtn = document.getElementById('resistance-btn');
        const resistanceBall = document.getElementById('resistance-ball');
        const resistancePaper = document.getElementById('resistance-paper');
        resistanceBtn.addEventListener('click', () => {
            resistanceBtn.disabled = true;
            resistanceBall.style.transition = 'bottom 1.5s ease-in';
            resistancePaper.style.transition = 'bottom 3s ease-out';
            resistanceBall.style.bottom = '0px';
            resistancePaper.style.bottom = '0px';
            setTimeout(() => {
                resistanceBall.style.transition = 'none';
                resistancePaper.style.transition = 'none';
                resistanceBall.style.bottom = 'calc(100% - 40px)';
                resistancePaper.style.bottom = 'calc(100% - 40px)';
                resistanceBtn.disabled = false;
            }, 3100);
        });

        // Section 4: Vacuum
        const vacuumBtn = document.getElementById('vacuum-btn');
        const vacuumBall = document.getElementById('vacuum-ball');
        const vacuumFeather = document.getElementById('vacuum-feather');
        vacuumBtn.addEventListener('click', () => {
            vacuumBtn.disabled = true;
            vacuumBall.style.transition = 'bottom 2s ease-in-out';
            vacuumFeather.style.transition = 'bottom 2s ease-in-out';
            vacuumBall.style.bottom = '0px';
            vacuumFeather.style.bottom = '0px';
            setTimeout(() => {
                vacuumBall.style.transition = 'none';
                vacuumFeather.style.transition = 'none';
                vacuumBall.style.bottom = 'calc(100% - 40px)';
                vacuumFeather.style.bottom = 'calc(100% - 40px)';
                vacuumBtn.disabled = false;
            }, 2100);
        });

        // Section 6: Chart and Calculator
        const timeSlider = document.getElementById('time-slider');
        const timeDisplay = document.getElementById('time-display');
        const velocityDisplay = document.getElementById('velocity-display');
        const heightDisplay = document.getElementById('height-display');
        
        const ctx = document.getElementById('fallChart').getContext('2d');
        const fallChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'é€Ÿåº¦ (m/s)',
                    data: [],
                    borderColor: '#3b82f6',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    yAxisID: 'yVelocity',
                    fill: true,
                    tension: 0.1
                }, {
                    label: 'é«˜åº¦ (m)',
                    data: [],
                    borderColor: '#16a34a',
                    backgroundColor: 'rgba(22, 163, 74, 0.1)',
                    yAxisID: 'yHeight',
                    fill: true,
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                scales: {
                    x: {
                        title: { display: true, text: 'æ—¶é—´ (s)' }
                    },
                    yVelocity: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: { display: true, text: 'é€Ÿåº¦ (m/s)', color: '#3b82f6' }
                    },
                    yHeight: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        title: { display: true, text: 'é«˜åº¦ (m)', color: '#16a34a' },
                        grid: {
                            drawOnChartArea: false, 
                        },
                    }
                }
            }
        });

        function updateCalculatorAndChart() {
            const t = parseFloat(timeSlider.value);
            const v = g * t;
            const h = 0.5 * g * t * t;

            timeDisplay.textContent = `${t.toFixed(1)} s`;
            velocityDisplay.textContent = `${v.toFixed(1)} m/s`;
            heightDisplay.textContent = `${h.toFixed(1)} m`;

            const labels = [];
            const velocityData = [];
            const heightData = [];
            const maxTime = 5;
            const steps = 50;

            for (let i = 0; i <= steps; i++) {
                const timePoint = (i / steps) * maxTime;
                labels.push(timePoint.toFixed(1));
                velocityData.push(g * timePoint);
                heightData.push(0.5 * g * timePoint * timePoint);
            }
            
            fallChart.data.labels = labels;
            fallChart.data.datasets[0].data = velocityData;
            fallChart.data.datasets[1].data = heightData;
            
            fallChart.update();
        }

        timeSlider.addEventListener('input', updateCalculatorAndChart);
        updateCalculatorAndChart();

        // Gemini Feature: Real Life Examples
        const realLifeInput = document.getElementById('real-life-input');
        const realLifeBtn = document.getElementById('real-life-btn');
        const realLifeResponse = document.getElementById('real-life-response');

        realLifeBtn.addEventListener('click', async () => {
            const scenario = realLifeInput.value.trim();
            if (!scenario) {
                realLifeResponse.textContent = 'è¯·è¾“å…¥ä¸€ä¸ªåœºæ™¯ã€‚';
                return;
            }
            realLifeResponse.textContent = 'æ­£åœ¨ç”Ÿæˆè§£é‡Š...';
            const prompt = `ä½ æ˜¯ä¸€ä½æœ‰è¶£çš„é«˜ä¸­ç‰©ç†è€å¸ˆã€‚è¯·ç”¨é€šä¿—æ˜“æ‡‚ã€ç”ŸåŠ¨çš„è¯­è¨€ï¼Œè§£é‡Š"è‡ªç”±è½ä½“"æˆ–"è¿‘ä¼¼è‡ªç”±è½ä½“"çš„ç‰©ç†æ¦‚å¿µæ˜¯å¦‚ä½•åœ¨ä»¥ä¸‹çœŸå®åœºæ™¯ä¸­ä½“ç°çš„ï¼š "${scenario}"ã€‚è§£é‡Šè¦ç®€çŸ­ï¼Œé‡ç‚¹çªå‡ºï¼Œé€‚åˆå¯¹ç‰©ç†åˆšäº§ç”Ÿå…´è¶£çš„å­¦ç”Ÿã€‚`;
            const responseText = await callGemini(prompt);
            realLifeResponse.textContent = responseText;
        });
        
        // Gemini Feature: Q&A Assistant
        const qaInput = document.getElementById('qa-input');
        const qaBtn = document.getElementById('qa-btn');
        const qaResponse = document.getElementById('qa-response');
        
        qaBtn.addEventListener('click', async () => {
             const question = qaInput.value.trim();
            if (!question) {
                qaResponse.textContent = 'è¯·è¾“å…¥ä½ çš„é—®é¢˜ã€‚';
                return;
            }
            qaResponse.textContent = 'AIåŠ©æ•™æ­£åœ¨æ€è€ƒä¸­...';
            const prompt = `ä½ æ˜¯ä¸€ä½è€å¿ƒä¸”çŸ¥è¯†æ¸Šåšçš„ç‰©ç†åŠ©æ•™ã€‚è¯·ç”¨æ¸…æ™°ã€ç®€æ´ã€é¼“åŠ±æ€§çš„è¯­è¨€å›ç­”ä»¥ä¸‹å…³äºç‰©ç†ï¼ˆç‰¹åˆ«æ˜¯è‡ªç”±è½ä½“ç›¸å…³ï¼‰çš„é—®é¢˜ã€‚å¦‚æœé—®é¢˜è¶…å‡ºäº†ç‰©ç†èŒƒç•´ï¼Œè¯·å§”å©‰åœ°è¯´æ˜ã€‚é—®é¢˜æ˜¯ï¼š"${question}"`;
            const responseText = await callGemini(prompt);
            qaResponse.textContent = responseText;
        });
        
        // Navigation Scroll highlighting
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active-link');
                        if (link.getAttribute('href').slice(1) === entry.target.id) {
                            link.classList.add('active-link');
                        }
                    });
                }
            });
        }, { rootMargin: '-30% 0px -70% 0px'});

        sections.forEach(section => {
            observer.observe(section);
        });
    });
</script>
</body>
</html>
